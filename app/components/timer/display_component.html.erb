<div
  class="min-h-screen flex transition-colors duration-500"
  data-controller="timer"
  data-timer-segments-value="<%= segments_json %>"
  data-timer-audio-outlet="#audio-controller"
>
  <!-- Audio controller -->
  <div id="audio-controller" data-controller="audio"></div>

  <!-- Top Navigation -->
  <div class="fixed top-4 left-4 right-4 z-10 flex justify-between items-center">
    <%= link_to root_path, class: "inline-block px-4 py-2 bg-slate-800/80 hover:bg-slate-700/80 rounded-lg text-sm font-semibold transition-colors" do %>
      ‚Üê Home
    <% end %>

    <div class="flex gap-2">
      <!-- Prep Time Adjuster -->
      <div
        data-controller="prep-time"
        data-prep-time-current-intervals-value="<%= @intervals_param %>"
        class="relative"
      >
        <button
          data-action="click->prep-time#toggle"
          class="px-4 py-2 bg-slate-800/80 hover:bg-slate-700/80 rounded-lg text-sm font-semibold transition-colors"
        >
          ‚è±Ô∏è Add Prep
        </button>

        <div
          data-prep-time-target="controls"
          class="hidden absolute right-0 mt-2 p-4 bg-slate-800 rounded-lg shadow-lg border border-slate-700 min-w-[200px]"
        >
          <div class="text-xs text-slate-400 mb-2">Prep Time (seconds)</div>
          <div class="flex items-center gap-2 mb-3">
            <button
              data-action="click->prep-time#decrement"
              class="w-8 h-8 bg-slate-700 hover:bg-slate-600 rounded flex items-center justify-center font-bold transition-colors"
            >
              ‚àí
            </button>
            <input
              type="number"
              data-prep-time-target="input"
              class="w-16 px-2 py-1 bg-slate-700 text-white rounded text-center font-mono"
              min="5"
              max="300"
              step="5"
            />
            <button
              data-action="click->prep-time#increment"
              class="w-8 h-8 bg-slate-700 hover:bg-slate-600 rounded flex items-center justify-center font-bold transition-colors"
            >
              +
            </button>
          </div>
          <button
            data-action="click->prep-time#add"
            class="w-full px-3 py-2 bg-amber-500 hover:bg-amber-600 text-slate-900 rounded font-semibold transition-colors"
          >
            Add to Timer
          </button>
        </div>
      </div>

      <!-- Copy Link -->
      <div data-controller="clipboard">
        <button
          data-clipboard-target="button"
          data-action="click->clipboard#copy"
          class="px-4 py-2 bg-slate-800/80 hover:bg-slate-700/80 rounded-lg text-sm font-semibold transition-colors"
        >
          üìã Copy Link
        </button>
      </div>
    </div>
  </div>

  <div class="flex-1 flex items-center justify-center lg:pr-80">
    <div class="w-full max-w-4xl p-8">
      <!-- Current segment type -->
      <div class="text-center mb-8">
        <h1
          class="text-6xl md:text-8xl font-bold uppercase tracking-wider"
          data-timer-target="segmentType"
        >
          Ready
        </h1>
      </div>

      <!-- Main countdown -->
      <div class="text-center mb-8">
        <div
          class="text-9xl md:text-[12rem] font-bold tabular-nums"
          data-timer-target="countdown"
        >
          00:00
        </div>
      </div>

      <!-- Round info -->
      <div
        class="text-center mb-8 text-2xl md:text-3xl opacity-75"
        data-timer-target="roundInfo"
      >
      </div>

      <!-- Controls -->
      <%= render Timer::ControlsComponent.new %>

      <!-- Progress -->
      <div class="mt-8 text-center opacity-75">
        <p class="text-lg" data-timer-target="progress">
          Segment 0 of <%= @segments.length %>
        </p>
      </div>
    </div>
  </div>

  <!-- Workout Overview Sidebar (desktop only) -->
  <%= render Workout::OverviewComponent.new(segments: @segments) %>
</div>
