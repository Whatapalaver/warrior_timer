<div class="space-y-4">
  <div class="flex justify-center gap-2 md:gap-4 flex-wrap">
    <button
      data-action="timer#startPause"
      data-timer-target="startPauseButton"
      class="px-4 md:px-8 py-3 md:py-4 text-lg md:text-xl font-bold rounded-lg bg-white text-slate-900 hover:bg-slate-200 transition-colors min-w-[100px] md:min-w-[120px]"
    >
      Start
    </button>

    <button
      data-action="timer#skip"
      class="px-4 md:px-8 py-3 md:py-4 text-lg md:text-xl font-bold rounded-lg bg-slate-700 text-white hover:bg-slate-600 transition-colors"
    >
      Skip
    </button>

    <button
      data-action="timer#reset"
      class="px-4 md:px-8 py-3 md:py-4 text-lg md:text-xl font-bold rounded-lg bg-slate-700 text-white hover:bg-slate-600 transition-colors"
    >
      Reset
    </button>
  </div>

  <!-- Workout Preview (hidden when running) -->
  <div
    data-timer-target="setupControls"
    class="transition-opacity duration-300"
  >
    <div class="bg-slate-800 rounded-lg p-4 border-2 border-slate-700 mb-4">
      <label class="text-sm font-semibold mb-2 block">Workout Preview:</label>
      <%= render(ProtocolPreview::ProtocolPreviewComponent.new(code: @intervals_param)) %>
    </div>
  </div>

  <!-- Edit Workout (hidden when running) -->
  <div
    data-timer-target="setupControls"
    data-controller="workout-editor"
    data-workout-editor-current-intervals-value="<%= @intervals_param %>"
    class="transition-opacity duration-300"
  >
    <div class="bg-slate-800 rounded-lg p-4 border-2 border-slate-700 mb-4">
      <div class="flex items-center gap-2 mb-2">
        <label class="text-sm font-semibold">Current Workout:</label>
        <button
          data-action="click->workout-editor#toggleEdit"
          data-workout-editor-target="editButton"
          class="px-3 py-1 bg-slate-700 hover:bg-slate-600 text-white rounded text-xs font-semibold transition-colors"
        >
          ✏️ Edit
        </button>
      </div>

      <!-- Display mode -->
      <div data-workout-editor-target="displayMode">
        <code class="text-sm text-emerald-400 font-mono"><%= @intervals_param %></code>
      </div>

      <!-- Edit mode (hidden by default) -->
      <div data-workout-editor-target="editMode" class="hidden">
        <input
          type="text"
          data-workout-editor-target="input"
          value="<%= @intervals_param %>"
          class="w-full px-3 py-2 bg-slate-700 text-white rounded text-sm font-mono border-2 border-slate-600 focus:border-emerald-500 focus:outline-none mb-2"
          placeholder="e.g., 10(30w30r)"
        />
        <div class="flex gap-2">
          <button
            data-action="click->workout-editor#apply"
            class="flex-1 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-slate-900 rounded font-semibold transition-colors"
          >
            Apply Changes
          </button>
          <button
            data-action="click->workout-editor#cancel"
            class="px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded font-semibold transition-colors"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Prep Time Input (hidden when running) -->
  <div
    data-timer-target="setupControls"
    data-controller="prep-time"
    data-prep-time-current-intervals-value="<%= @intervals_param %>"
    class="flex justify-center items-center gap-2 flex-wrap transition-opacity duration-300"
  >
    <label class="text-sm opacity-75">Add Prep Time:</label>
    <input
      type="number"
      data-prep-time-target="input"
      class="w-20 px-3 py-2 bg-slate-700 text-white rounded text-center font-mono"
      value="30"
      min="5"
      max="300"
      step="5"
    />
    <span class="text-sm opacity-75">seconds</span>
    <button
      data-action="click->prep-time#add"
      class="px-6 py-2 bg-amber-500 hover:bg-amber-600 text-slate-900 rounded font-semibold transition-colors"
    >
      Add
    </button>
  </div>

  <!-- Metronome Controls (hidden when running) -->
  <div data-timer-target="setupControls" class="flex justify-center items-center gap-3 flex-wrap border-t border-slate-700 pt-4 transition-opacity duration-300">
    <label class="flex items-center gap-2">
      <input
        type="checkbox"
        data-timer-target="metronomeToggle"
        data-action="change->timer#toggleMetronome"
        class="w-5 h-5 rounded bg-slate-700 border-slate-600 text-emerald-500 focus:ring-emerald-500 focus:ring-offset-slate-900"
      />
      <span class="text-sm font-semibold">Metronome</span>
    </label>

    <div class="flex items-center gap-2">
      <label class="text-sm opacity-75">BPM:</label>
      <input
        type="number"
        data-timer-target="metronomeBpm"
        data-action="change->timer#updateMetronomeBpm"
        class="w-16 px-2 py-1 bg-slate-700 text-white rounded text-center font-mono text-sm"
        value="60"
        min="1"
        max="180"
        step="1"
      />
    </div>

    <span class="text-xs opacity-50">(Work segments only)</span>
  </div>
</div>
